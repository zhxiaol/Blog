---
layout: post
title: 集合set
tags:
- java

categories: java
description:
---



## HashSet
存储自定义对象保证元素唯一性
重写hashCode()和equals()方法

## HashSet原理
当HashSet调用add()方法存储对象的时候, 先调用对象的hashCode()方法得到一个哈希值, 然后在集合中查找是否有哈希值相同的对象
如果没有哈希值相同的对象就直接存入集合
如果有哈希值相同的对象, 就和哈希值相同的对象逐个进行equals()比较,比较结果为false就存入, true则不存

## LinkedHashSet
存取顺序不变

## 练习

###### 产生10个1-20之间的随机数要求随机数不能重复

```java
HashSet<Integer> hs = new HashSet<>();      //创建集合对象
Random r = new Random();                    //创建随机数对象

while(hs.size() < 10) {
    int num = r.nextInt(20) + 1;            //生成1到20的随机数
    hs.add(num);
}

for (Integer integer : hs) {                //遍历集合
    System.out.println(integer);            //打印每一个元素
}
```

###### 去除list集合重复元素
```java
public static void getSingle(List<String> list) {
       LinkedHashSet<String> lhs = new LinkedHashSet<>();
       lhs.addAll(list);                                   //将list集合中的所有元素添加到lhs
       list.clear();                                       //清空原集合
       list.addAll(lhs);                                   //将去除重复的元素添回到list中
   }
```

## TreeSet原理

### 自然顺序(Comparable)
TreeSet类的add()方法中会把存入的对象提升为Comparable类型
调用对象的compareTo()方法和集合中的对象比较
根据compareTo()方法返回的结果进行存储

### 比较器顺序(Comparator)
创建TreeSet的时候可以制定 一个Comparator
如果传入了Comparator的子类对象, 那么TreeSet就会按照比较器中的顺序排序
add()方法内部会自动调用Comparator接口中compare()方法排序
调用的对象是compare方法的第一个参数,集合中的对象是compare方法的第二个参数

### 区别
TreeSet构造函数什么都不传, 默认按照类中Comparable的顺序(没有就报错ClassCastException)
TreeSet如果传入Comparator, 就优先按照Comparator

```java

// 对集合中的元素排序,并保留重复
public static void sort(List<String> list) {
TreeSet<String> ts = new TreeSet<>(new Comparator<String>(){
		@Override
		public int compare(String s1, String s2) {						
			int num = s1.compareTo(s2);									
			return num == 0 ? 1 : num;									
		}});
		ts.addAll(list);												
		list.clear();													
		list.addAll(ts);											
}
```
