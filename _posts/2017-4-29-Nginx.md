---
layout: post
title: Nginx
tags:
- java

categories: java
description: Nginx
---
## Nginx
> Nginx(engine x)是一个高性能的HTTP和反向代理服务器。轻量级的web服务器/反向代理服务器。
> 特点:占有内存少，并发能力强
## mac 配置Nginx
```
mac配置Ngix
	|
	|--安装Nginx
	|	  |
	|	  |--终端: brew install nginx		
	|
	|--修改tomcat配置
	|	  |--tomcat目录
	|	  	    |--conf目录
	|			    |--server.xml
	|					 |--注意修改端口不要冲突
	|		  			 |--<Engine name="Catalina" defaultHost="localhost" jvmRoute="tomcat2">
	|
	|--负载均衡配置
	|	   |--Nginx目录
	|			|--nginx.conf
	|				  |--添加  upstream server_lb{
    |  				  |			 server 127.0.0.1:8080 weight=10;
    |    			  |			 server 127.0.0.1:8081 weight=2;
    |				  |			}
    |				  |				|--weight 权重				 
    |				  |
    |				  |--location标签里添加 proxy_pass http://server_lb;
    |
    |
    |--启动Nginx
    |	 |
    |	 |--终端: sudo nginx -c 完整目录
    |	 	 |--sudo nginx -c /usr/local/homebrew/etc/nginx/nginx.conf 	
    |
    |--重新加载Nginx
    |	 |
    |	 |--终端: sudo nginx -s reload
    |		 	
    |
    |--关闭Nginx
    |	 |
    |	 |--终端	sudo nginx -s stop/quit

```

## 共享session
```
session共享
	|
	|
	|--第一种:
	|    以负载均衡服务器本身提供的session共享策略
	|    每种服务期的配置是不一样的并且nginx本身是没有的
	|
	|--第二种:
	|	 利用web容器本身的session共享策略来配置共享
	|	 适合weblogic,tomcat有缺陷，浪费带宽
	|		  |
	|		  |--tomcat目录
	|				|--conf
	|					|--server.xml
	|					|	 |--1.取消Engine标签里面的 Cluster注释			
	|					|
	|					|--web.xml
	|						 |--2.添加<distributable/>
	|--第三种:
	|	 tomcat集群+redis的Session共享配置方法
```

```
虚拟目录
	|
	|--tomcat目录
		 |
		 |--conf
		 	 |
		 	 |--Catalina
		 	 	  |
		 	 	  |--localhost
		 	 	  		|
		 	 	  		|--添加ROOT.xml 文件名称就是访问路径
		 	 	  			 |
		 	 	  			 |--<?xml version="1.0" encoding="UTF-8" ?>
								<Context docBase="/zhxiaol/java/learnspace/Learn47/web"/>
```
