---
layout: post
title: js
tags:
- java

categories: java
description:js
---
## Javascript常用对象
###### Boolean Number
|方法|备注|
|-----|-----|
|new Number(value)|构造方法|
|Number(value)|创建函数|
|toString()|转换成string|
|valueOf()|拆装成原始类型|


###### String
|方法|备注|
|----|----|
|new String(value)|创建对象|
|String(value)|构造函数|
|length|字符串长度|
|charAt(index)|获得指定下标的字符|
|indexOf(str)|查找指定字符串的下标|
|lastIndexOf(str)|从后查找指定字符串的下标|
|split(value)|分割成字符串数组|
|substr(start,num)|从start开始截取num个字符|
|substring(start,end)|从start开始截取到end字符|
|toUpperCase()|转换成大写|
|toLowerCase()|转换成小写|


###### Array
|方法|备注|
|----|----|
|new Array()|构造方法|
|new Array(size)|构造方法|
|new Array(element0, element1, ..., elementn)|构造方法|
|length|数组长度|
|join(str)|用str拼接成字符串|
|pop()|删除数组最后一个元素|
|push(value)|将value添加到数组尾部|
|reverse()|反转|
|sort()|排序|

###### Date
|方法|备注|
|----|----|
|new Date()|当前时间|
|new Date(millis)|指定毫秒|
|toString()|Wed Feb 22 2017 16:13:31 GMT+0800 (CST)|
|toLocaleString()|2017/2/22 下午4:13:31|
|getFullYear()|年|
|getMonth()|月|
|getDate()|星期|
|getDay()|天|
|getTime()|毫秒|

###### Math
|方法|备注|
|----|----|
|abs|绝对值|
|ceil|向上取整|
|floor|向下取整|
|round|四舍五入|
|pow(x,y)|x的y次幂|
|randoom|0-1之间的随机数|

###### Regexp
`var reg=/^正则表达式$/;
reg.test(str) 判断字符串是否匹配正则表达式`

## 	在ECMAScript中函数有以下几种创建方式
```js
<script type="text/javascript">
    function fun1(){
        alert("普通方式");
    }
    fun1();
    var fun2=function(){
        alert("匿名方式");
    }
    fun2();
    function fun3(fun) {
        fun();
    }
    fun3(function(){
        alert("匿名方式使用场景")
    })
    var fun4=new Function("a","b","alert(a+b)");
    fun4(2,8);
    //在javascript中有一个特殊的对象arguments,我们可以通过它来获取所有函数中的参数。
    function fun5(a,b,c){
        for(var i=0;i<arguments.length;i++){
           arguments[i]
        }
        alert(arguments);
    }
    fun5(1,3,5,7,8);
    function fun6(a,b){
        return a+b;
        alert("return之后不执行");
    }
    alert(fun6(10,20));
</script>
```
## Javascript全局函数
###### encodeURI encodeURIComponent 和 escape
```js
var url="http://www.baidu.com?name=张三&password=1234";
//http://www.baidu.com?name=%E5%BC%A0%E4%B8%89&password=1234
alert(encodeURI(url));
//http%3A%2F%2Fwww.baidu.com%3Fname%3D%E5%BC%A0%E4%B8%89%26password%3D1234
alert(encodeURIComponent(url));
//http%3A//www.baidu.com%3Fname%3D%u5F20%u4E09%26password%3D1234
alert(escape(url));
```
###### eval
```js
<script type="text/javascript">
    var str="var a=3;var b=4;alert(a+b)";
    eval(str);
    function print(str) {
        eval(str);
    }
    print("alert('代码注入')");
</script>
```
## 事件绑定
```html
<body>
    <input type="button" value="内嵌到标签中" onclick="alert('绑定事件:内嵌到标签中')"/><br/>
    <input type="button" value="事件内嵌html中响应行为用函数封装" onclick="fn()"/><br/>
    <input type="button" value="事件和响应都和html分离" id="btn"/>
</body>
<script type="text/javascript">
    function fn(){
        alert("事件内嵌响应用函数封装");
    }
    document.getElementById("btn").onclick=function(){
        alert("事件和响应都和html分离");
    }
</script>
```
## this
    this经过事件传递给函数的是html标签对象
```js
<input id="btn" type="button" value="button" onclick="fun(this)">
<script type="text/javascript">
    function fun(obj){
        alert(obj.value)
    }
</script>
```
## onchange
```html
<body>
    <select id="city">
        <option value="bj">北京</option>
        <option value="tj">天津</option>
        <option value="sh">上海</option>
    </select>
    <select id="area">
        <option >海淀区</option>
        <option >朝阳区</option>
        <option >东城区</option>
    </select>
</body>
<script type="text/javascript">

    var select=document.getElementById("city");
    select.onchange=function(){
        var optionVal=select.value;
        switch (optionVal){
            case "bj":
                var area=document.getElementById("area");
                area.innerHTML="<option>海淀区</option><option>朝阳区</option><option>东城区</option>";
                break;
            case "tj":
                var area=document.getElementById("area");
                area.innerHTML="<option>南开区</option><option>西青区</option><option>河西区</option>";
                break;
            case "sh":
                var area=document.getElementById("area");
                area.innerHTML="<option>浦东区</option><option>杨浦区</option>";
                break;
        }
    }
</script>
```
## onfocus和onblur
```html
<body>
    <label for="txt">name</label>
    <input type="text" id="txt"><span id="hint"></span>
</body>
    <script type="text/javascript">
        var txt=document.getElementById("txt");
        txt.onfocus=function(){
            var span=document.getElementById("hint");
            span.innerHTML="用户名格式最少8位";
            span.style.color="green";
        }
        txt.onblur=function(){
            var span=document.getElementById("hint");
            span.innerHTML="对不起 格式不正确";
            span.style.color="red";
        }
    </script>
```
## onmouseover和onmouseout
```html
<div id="d1" ></div>
<script type="text/javascript">
    var div=document.getElementById("d1");
    div.onmouseover=function(){
        this.style.backgroundColor="green";
    };
    div.onmouseout=function () {
        this.style.backgroundColor="red";
    };
</script>
```
## onload
```html
<body >
      <span id="span"></span>  
</body>
<script type="text/javascript">
    document.getElementById("span").innerHTML="hello js";
</script>
```
```html
<head>
    <script type="text/javascript">
        window.onload=function(){
            document.getElementById("span").innerHTML="hello js";
        }
    </script>
</head>
```
## 阻止事件的默认行为
```html
<a href="http://www.baidu. com" onclick="fun(event)">点击我把</a>
<a href="http://www.baidu.com" onclick="return false">再点我</a>
<script type="text/javascript">
    function fun(e) {
        if(e&&e.preventDefault){//W3C
            e.preventDefault();
        }else {//IE
            window.event.returnValue=false
        }
    }
</script>
```
## 阻止事件的传播
```html
<body>
    <div style="width: 100px;height: 100px;background-color: green;padding: 50px"  onclick="fun1()">
        <div style="width: 100px;height: 100px;background-color: red" onclick="fun2(event)"></div>
    </div>
</body>
<script type="text/javascript">
    function fun1() {
        alert("fun1");
    }
    function fun2(e) {
        alert("fun2");
        if(e&&e.stopPropagation){
            e.stopPropagation();
        }else {
            window.event.cancelBubble=true;
        }
    }
</script>
```
## window
### 弹框方法
    提示框: alert("提示信息")
    确认框: confirm("确认信息) 返回值（true flase）
         输入框: prompt("提示信息") 返回值（取消-null 确认-输入内容）
```html
<script type="text/javascript">
    var res=confirm("您确认要删除吗")
    alert(res);//true flase
</script>

<script type="text/javascript">
    var res=prompt("请输入密码");
    alert(res);
</script>
```

### open方法
```html
<script type="text/javascript">
    open("http://www.baidu.com")
</script>
```
### 定时器
   setTimeOut(function,millis)
   clearTimeOut(定时器名称)
   setInterval(function,millis)间隔millis执行一次function
   clearInterval()
```html
    <script type="text/javascript">
        setTimeout(function(){
            alert("定时器")
        },3000);
    </script>
</head>
<body>
    <span id="span"></span><br>
    <input type="button" value="button" onclick="closeTime()">
</body>
    <script>
        function fun(){
            var date=new Date();
            document.getElementById("span").innerHTML=date.getMinutes()+":"+date.getSeconds();
            setTimeout(fun,1000);
        }
        fun();
        function closeTime() {
            clearTimeout(fun());
        }
    </script>
```
```html
<body>
    <span id="span"></span><br>
    <input type="button" value="button" onclick="stop()">
</body>
    <script type="text/javascript">
        var id=setInterval(function(){
            var date=new Date();
            document.getElementById("span").innerHTML=date.getMinutes()+":"+date.getSeconds();
        },1000);
        function stop() {
            clearInterval(id);
        }
    </script>
```
```html
<body>
    恭喜您注册成功，<span id="span" style="color: red;">5</span>秒后跳转到首页，如果不跳转请<a href="#">点击这里</a>
</body>
    <script type="text/javascript">
        var num=5;
        var id=setInterval(function(){
            if(num>0){
            document.getElementById("span").innerHTML=--num;
            }else {
                clearInterval(id);
                location.href="http://www.baidu.com";
            }

        },1000);
    </script>
```
### location
location.href="跳转url";
### history
back();后退
forward();前进
go();
```html
<input type="button" value="上一页" onclick="history.back()">
<input type="button" value="下一页" onclick="history.forward()">
<input type="button" value="上一页" onclick="history.go(-1)">
<input type="button" value="下一页" onclick="history.go(1)">
```
## dom的结构
window --> document ---> 根标签`<html>`--->元素`<head>`+元素`<body>`
## dom属性和方法
|方法|备注|
|----|----|
|document.getElementById(id)|通过id获得元素节点对象 |
|document.getElementsByName(name)|通过属性name获得节点对象集合|
|document.getElementsByTagName(tag)|通过标签名称获得元素节点的集合|
|element.hasChildNodes()|元素是否含有子节点|
|node.nodeName|文本[返回#text||获得e.fristChild] 标签[返回标签名称] 属性[返回属性名称||获得getAttributeNode(name)]
|node.nodeType|文本-3 标签-1 属性-2|
|node.nodeValue|标签-null 文本-文本内容 属性-属性值|
|node.replaceChild(new,old)|父节点替换子节点|
|element.getAttribute(name)|返回属性值|
|element.setAttribute("key","value")|修改属性值|
|document.createElement(tagName)|创建标签|
|document.createTextNode(str)|创建文本节点|
|parent.appendChild(child)|添加子节点|
|parent.insertBefore(new,old)|在old前面添加子节点|
|nextSibling|下一个兄弟节点|
|parent.removeChild(child)|删除子节点|
|innerHTML|获取对象的内容 或 向对象插入内容|
|innerText|和innerHTML一样 但是去除Html标签|

```js
<script type="text/javascript">
document.getElementById("btn").onclick=function(){
    var select=document.getElementById("select");
    var ops=select.getElementsByTagName("option");
    for(var i=0;i<ops.length;i++){
        var op=ops[i];
        if(op.selected){
            alert(op.value);
        }
    }
}
</script>
```
```js
<script type="text/javascript">
    var e=document.getElementById("h1");
    var txt=e.lastChild;
    alert(txt.nodeValue);
    txt.nodeValue="明天要上班";
    var arr=e.childNodes;
    for(var i=0;i<arr.length;i++){
        alert(arr[i].nodeValue)
    }
</script>
```
```js
<script type="text/javascript">
    var bj=document.getElementById("bj");
    var fk=document.getElementById("fk");
    bj.onclick=function(){
        bj.parentNode.replaceChild(fk,this);
    }
</script>
```
```js
<input type="button" value="button" id="btn">
<script type="text/javascript">
    var btn=document.getElementById("btn");
    btn.setAttribute("value","按钮");
    alert(btn.getAttribute("value"));
</script>
```
```js
<script type="text/javascript">
// 创建新的节点 <li id="tj" name="tianjin">天津</li>
var li=document.createElement("li");
li.setAttribute("id","tj");
li.setAttribute("name","tianjin");
var txt=document.createTextNode("天津");
li.appendChild(txt);
var cq=document.getElementById("cq");
// 在 <li id="cq" name="chongqing">重庆</li>的前面
cq.parentNode.insertBefore(li,cq);
</script>
```
